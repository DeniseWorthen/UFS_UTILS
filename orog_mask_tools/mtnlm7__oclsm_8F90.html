<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>orog_mask_tools: /scratch1/NCEPDEV/nems/Denise.Worthen/WORK/utils_dw/sorc/orog_mask_tools.fd/orog.fd/mtnlm7_oclsm.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">orog_mask_tools
   &#160;<span id="projectnumber">1.13.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('mtnlm7__oclsm_8F90.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">mtnlm7_oclsm.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Terrain maker for the ufs weather model.  
<a href="#details">More...</a></p>

<p><a href="mtnlm7__oclsm_8F90_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a14ed6ec725a33a0ab2b3469b7b386ce2"><td class="memItemLeft" align="right" valign="top">program&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mtnlm7__oclsm_8F90.html#a14ed6ec725a33a0ab2b3469b7b386ce2">__mtnlm7_oclsm.f90__</a></td></tr>
<tr class="memdesc:a14ed6ec725a33a0ab2b3469b7b386ce2"><td class="mdescLeft">&#160;</td><td class="mdescRight">This program creates landmask, land fraction, terrain and and fields required for the model's gravity wave drag (GWD) scheme.  <a href="#a14ed6ec725a33a0ab2b3469b7b386ce2">More...</a><br /></td></tr>
<tr class="separator:a14ed6ec725a33a0ab2b3469b7b386ce2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b2ebbacbfdc74334169e2313b8e8aa6"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mtnlm7__oclsm_8F90.html#a6b2ebbacbfdc74334169e2313b8e8aa6">make_mask</a> (zslm, slm, land_frac, im, jm, imn, jmn, lon_c, lat_c)</td></tr>
<tr class="memdesc:a6b2ebbacbfdc74334169e2313b8e8aa6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the land-mask, land fraction.  <a href="#a6b2ebbacbfdc74334169e2313b8e8aa6">More...</a><br /></td></tr>
<tr class="separator:a6b2ebbacbfdc74334169e2313b8e8aa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a264f719290ba9959002a058a732edd0e"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mtnlm7__oclsm_8F90.html#a264f719290ba9959002a058a732edd0e">makemt2</a> (ZAVG, ZSLM, ORO, SLM, VAR, VAR4, IM, JM, IMN, JMN, lon_c, lat_c, <a class="el" href="lakefrac_8F90.html#a563966340bfa6668f1c820c8a8c33464">lake_frac</a>, land_frac)</td></tr>
<tr class="memdesc:a264f719290ba9959002a058a732edd0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the orography, standard deviation of orography and the convexity on a model tile.  <a href="#a264f719290ba9959002a058a732edd0e">More...</a><br /></td></tr>
<tr class="separator:a264f719290ba9959002a058a732edd0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94ee7469654445bd7d6ecc9da489b770"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mtnlm7__oclsm_8F90.html#a94ee7469654445bd7d6ecc9da489b770">makeoa2</a> (ZAVG, zslm, VAR, OA4, OL, ELVMAX, ORO, IM, JM, IMN, JMN, lon_c, lat_c, lon_t, lat_t, dx, dy, is_south_pole, is_north_pole)</td></tr>
<tr class="memdesc:a94ee7469654445bd7d6ecc9da489b770"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create orographic asymmetry and orographic length scale on the model grid.  <a href="#a94ee7469654445bd7d6ecc9da489b770">More...</a><br /></td></tr>
<tr class="separator:a94ee7469654445bd7d6ecc9da489b770"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa43d59fb095cc58fca01f2d537e27f27"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mtnlm7__oclsm_8F90.html#aa43d59fb095cc58fca01f2d537e27f27">makepc2</a> (ZAVG, ZSLM, THETA, GAMMA, SIGMA, IM, JM, IMN, JMN, lon_c, lat_c, SLM)</td></tr>
<tr class="memdesc:aa43d59fb095cc58fca01f2d537e27f27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make the principle coordinates - slope of orography, anisotropy, angle of mountain range with respect to east.  <a href="#aa43d59fb095cc58fca01f2d537e27f27">More...</a><br /></td></tr>
<tr class="separator:aa43d59fb095cc58fca01f2d537e27f27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8cc4cf6c036b4bdcf88fb0a80fad31f"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mtnlm7__oclsm_8F90.html#ae8cc4cf6c036b4bdcf88fb0a80fad31f">tersub</a> (IM, JM, EFAC, OUTGRID, MASK_ONLY, EXTERNAL_MASK_FILE)</td></tr>
<tr class="memdesc:ae8cc4cf6c036b4bdcf88fb0a80fad31f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Driver routine to compute terrain.  <a href="#ae8cc4cf6c036b4bdcf88fb0a80fad31f">More...</a><br /></td></tr>
<tr class="separator:ae8cc4cf6c036b4bdcf88fb0a80fad31f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Terrain maker for the ufs weather model. </p>
<dl class="section author"><dt>Author</dt><dd>Mark Iredell </dd></dl>
<dl class="section date"><dt>Date</dt><dd>92-04-16 </dd></dl>

<p class="definition">Definition in file <a class="el" href="mtnlm7__oclsm_8F90_source.html">mtnlm7_oclsm.F90</a>.</p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a14ed6ec725a33a0ab2b3469b7b386ce2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14ed6ec725a33a0ab2b3469b7b386ce2">&#9670;&nbsp;</a></span>__mtnlm7_oclsm.f90__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">program __mtnlm7_oclsm.f90__ </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This program creates landmask, land fraction, terrain and and fields required for the model's gravity wave drag (GWD) scheme. </p>
<p>Specifically:</p>
<ul>
<li>Land mask (yes/no flag)</li>
<li>Land fraction</li>
<li>Terrain (orography)</li>
<li>Maximum elevation</li>
<li>Standard deviation of terrain</li>
<li>Convexity</li>
<li>Orographic Asymetry - W/S/SW/NW directional components.</li>
<li>Orographic Length Scale - W/S/SW/NW directional components.</li>
<li>Anisotropy</li>
<li>Slope of terrain</li>
<li>Angle of mountain range with respect to East.</li>
</ul>
<p>This program operates on a single cubed-sphere tile.</p>
<p>Optionally, the program can compute and output only the land mask and land fraction. Or, it can read in the mask and fraction from an external file, then compute the terrain and GWD fields using that mask. These options are used to support coupled (atm/oceann) runs of the UFS. The process is:</p><ul>
<li>Run this program and output the mask/fraction only.</li>
<li>Adjust or merge the mask/fraction with the ocean mask (using another program).</li>
<li>Read in this 'merged' mask/fraction and compute the terrain and GWD fields.</li>
</ul>
<p>PROGRAM HISTORY LOG:</p><ul>
<li>92-04-16 IREDELL</li>
<li>98-02-02 IREDELL FILTER</li>
<li>98-05-31 HONG Modified for subgrid orography used in Kim's scheme</li>
<li>98-12-31 HONG Modified for high-resolution GTOPO orography</li>
<li>99-05-31 HONG Modified for getting OL4 (mountain fraction)<ul>
<li>00-02-10 Moorthi's modifications</li>
</ul>
</li>
<li>00-04-11 HONG Modified for reduced grids</li>
<li>00-04-12 Iredell Modified for reduced grids</li>
<li>02-01-07 (<em>j</em>) modified for principal axes of orography There are now 14 files, 4 additional for lm mb<ul>
<li>04-04-04 (<em>j</em>) re-Test on IST/ilen calc for sea-land mask(<em>j</em>)</li>
<li>04-09-04 minus sign here in MAKEOA IST and IEN as in MAKEMT!</li>
<li>05-09-05 if test on HK and HLPRIM for GAMMA SQRT</li>
<li>07-08-07 replace 8' with 30" incl GICE, conintue w/ S-Y. lake slm
  - 08-08-07  All input 30", UMD option, and filter as described below</li>
<li><p class="startli">24-08-15 Remove old code used by spectral GFS.</p>
<p class="startli">INPUT FILES:</p>
</li>
<li>UNIT5 - PROGRAM CONTROL NAMELIST.</li>
<li>NCID - MODEL 'GRID' FILE</li>
<li>NCID - GMTED2010 USGS orography (NetCDF)</li>
<li>NCID - 30" UMD land cover mask. (NetCDF)
  -   NCID       - GICE Grumbine 30" RAMP Antarctica orog. (NetCDF)</li>
<li><p class="startli">NCID - MERGE FILE. CONTAINS LAND MASK, FRACTION AND LAKE FRACTION THAT HAS BEEN MERGED WITH AN OCEAN GRID. (NetCDF)</p>
<p class="startli">OUTPUT FILES (ALL ON A SINGLE CUBED-SPHERE TILE) :</p>
</li>
<li>NCID - OROGRAPHY FILE (NetCDF) IF MASK_ONLY=FALSE</li>
<li>NCID - MASK FILE (NetCDF) IF MASK_ONLY=TRUE</li>
<li>CONTAINS ONLY LAND MASK AND FRACTION.</li>
</ul>
</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>0 for success, error code otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="mtnlm7__oclsm_8F90_source.html#l00072">72</a> of file <a class="el" href="mtnlm7__oclsm_8F90_source.html">mtnlm7_oclsm.F90</a>.</p>

<p class="reference">References <a class="el" href="io__utils_8F90_source.html#l00400">io_utils::read_mdl_dims()</a>, and <a class="el" href="mtnlm7__oclsm_8F90_source.html#l00119">tersub()</a>.</p>

</div>
</div>
<a id="a6b2ebbacbfdc74334169e2313b8e8aa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b2ebbacbfdc74334169e2313b8e8aa6">&#9670;&nbsp;</a></span>make_mask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine make_mask </td>
          <td>(</td>
          <td class="paramtype">integer, dimension(imn,jmn), intent(in)&#160;</td>
          <td class="paramname"><em>zslm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im,jm), intent(out)&#160;</td>
          <td class="paramname"><em>slm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im,jm), intent(out)&#160;</td>
          <td class="paramname"><em>land_frac</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>im</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>jm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>imn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>jmn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im+1,jm+1), intent(in)&#160;</td>
          <td class="paramname"><em>lon_c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im+1,jm+1), intent(in)&#160;</td>
          <td class="paramname"><em>lat_c</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create the land-mask, land fraction. </p>
<p>This routine is used for the FV3GFS model.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">zslm</td><td>The high-resolution input land-mask dataset. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">slm</td><td>Land-mask on the model tile. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">land_frac</td><td>Land fraction on the model tile. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">im</td><td>"i" dimension of the model grid. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">jm</td><td>"j" dimension of the model grid. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">imn</td><td>"i" dimension of the hi-res input orog/mask datasets. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">jmn</td><td>"j" dimension of the hi-res input orog/mask datasets. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lon_c</td><td>Longitude of the model grid corner points. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lat_c</td><td>Latitude on the model grid corner points. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>GFDL Programmer </dd></dl>

<p class="definition">Definition at line <a class="el" href="mtnlm7__oclsm_8F90_source.html#l00409">409</a> of file <a class="el" href="mtnlm7__oclsm_8F90_source.html">mtnlm7_oclsm.F90</a>.</p>

<p class="reference">References <a class="el" href="orog__utils_8F90_source.html#l00714">orog_utils::get_index()</a>, and <a class="el" href="orog__utils_8F90_source.html#l00318">orog_utils::inside_a_polygon()</a>.</p>

<p class="reference">Referenced by <a class="el" href="mtnlm7__oclsm_8F90_source.html#l00119">tersub()</a>.</p>

</div>
</div>
<a id="a264f719290ba9959002a058a732edd0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a264f719290ba9959002a058a732edd0e">&#9670;&nbsp;</a></span>makemt2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine makemt2 </td>
          <td>(</td>
          <td class="paramtype">integer, dimension(imn,jmn), intent(in)&#160;</td>
          <td class="paramname"><em>ZAVG</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(imn,jmn), intent(in)&#160;</td>
          <td class="paramname"><em>ZSLM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im,jm), intent(out)&#160;</td>
          <td class="paramname"><em>ORO</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im,jm), intent(in)&#160;</td>
          <td class="paramname"><em>SLM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im,jm), intent(out)&#160;</td>
          <td class="paramname"><em>VAR</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im,jm), intent(out)&#160;</td>
          <td class="paramname"><em>VAR4</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>IM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>JM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>IMN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>JMN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im+1,jm+1), intent(in)&#160;</td>
          <td class="paramname"><em>lon_c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im+1,jm+1), intent(in)&#160;</td>
          <td class="paramname"><em>lat_c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im,jm), intent(in)&#160;</td>
          <td class="paramname"><em>lake_frac</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im,jm), intent(in)&#160;</td>
          <td class="paramname"><em>land_frac</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create the orography, standard deviation of orography and the convexity on a model tile. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">zavg</td><td>The high-resolution input orography dataset. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">zslm</td><td>The high-resolution input land-mask dataset. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">oro</td><td>Orography on the model tile. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">slm</td><td>Land-mask on the model tile. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">var</td><td>Standard deviation of orography on the model tile. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">var4</td><td>Convexity on the model tile. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">im</td><td>"i" dimension of the model grid. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">jm</td><td>"j" dimension of the model grid. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">imn</td><td>"i" dimension of the hi-res input orog/mask datasets. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">jmn</td><td>"j" dimension of the hi-res input orog/mask datasets. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lon_c</td><td>Longitude of the model grid corner points. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lat_c</td><td>Latitude on the model grid corner points. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lake_frac</td><td>Fractional lake within the grid </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">land_frac</td><td>Fractional land within the grid </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>GFDL Programmer </dd></dl>

<p class="definition">Definition at line <a class="el" href="mtnlm7__oclsm_8F90_source.html#l00547">547</a> of file <a class="el" href="mtnlm7__oclsm_8F90_source.html">mtnlm7_oclsm.F90</a>.</p>

<p class="reference">References <a class="el" href="orog__utils_8F90_source.html#l00714">orog_utils::get_index()</a>, and <a class="el" href="orog__utils_8F90_source.html#l00318">orog_utils::inside_a_polygon()</a>.</p>

<p class="reference">Referenced by <a class="el" href="mtnlm7__oclsm_8F90_source.html#l00119">tersub()</a>.</p>

</div>
</div>
<a id="a94ee7469654445bd7d6ecc9da489b770"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94ee7469654445bd7d6ecc9da489b770">&#9670;&nbsp;</a></span>makeoa2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine makeoa2 </td>
          <td>(</td>
          <td class="paramtype">integer, dimension(imn,jmn), intent(in)&#160;</td>
          <td class="paramname"><em>ZAVG</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(imn,jmn), intent(in)&#160;</td>
          <td class="paramname"><em>zslm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im,jm), intent(in)&#160;</td>
          <td class="paramname"><em>VAR</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im,jm,4), intent(out)&#160;</td>
          <td class="paramname"><em>OA4</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im,jm,4), intent(out)&#160;</td>
          <td class="paramname"><em>OL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im,jm), intent(out)&#160;</td>
          <td class="paramname"><em>ELVMAX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im,jm), intent(in)&#160;</td>
          <td class="paramname"><em>ORO</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>IM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>JM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>IMN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>JMN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im+1,jm+1), intent(in)&#160;</td>
          <td class="paramname"><em>lon_c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im+1,jm+1), intent(in)&#160;</td>
          <td class="paramname"><em>lat_c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im,jm), intent(in)&#160;</td>
          <td class="paramname"><em>lon_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im,jm), intent(in)&#160;</td>
          <td class="paramname"><em>lat_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im,jm), intent(in)&#160;</td>
          <td class="paramname"><em>dx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im,jm), intent(in)&#160;</td>
          <td class="paramname"><em>dy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, dimension(im,jm), intent(in)&#160;</td>
          <td class="paramname"><em>is_south_pole</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, dimension(im,jm), intent(in)&#160;</td>
          <td class="paramname"><em>is_north_pole</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create orographic asymmetry and orographic length scale on the model grid. </p>
<p>This routine is used for the cubed-sphere grid.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">zavg</td><td>High-resolution orography data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">zslm</td><td>High-resolution land-mask data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">var</td><td>Standard deviation of orography on the model grid. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">oa4</td><td>Orographic asymmetry on the model grid. Four directional components - W/S/SW/NW </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ol</td><td>Orographic length scale on the model grid. Four directional components - W/S/SW/NW </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">elvmax</td><td>Maximum elevation within a model grid box. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">oro</td><td>Orography on the model grid. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">im</td><td>"i" dimension of the model grid tile. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">jm</td><td>"j" dimension of the model grid tile. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">imn</td><td>"i" dimension of the high-resolution orography and mask data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">jmn</td><td>"j" dimension of the high-resolution orography and mask data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lon_c</td><td>Corner point longitudes of the model grid points. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lat_c</td><td>Corner point latitudes of the model grid points. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lon_t</td><td>Center point longitudes of the model grid points. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lat_t</td><td>Center point latitudes of the model grid points. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dx</td><td>Length of model grid points in the 'x' direction. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dy</td><td>Length of model grid points in the 'y' direction. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_south_pole</td><td>Is the model point at the south pole? </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_north_pole</td><td>is the model point at the north pole? </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>GFDL Programmer </dd></dl>

<p class="definition">Definition at line <a class="el" href="mtnlm7__oclsm_8F90_source.html#l01028">1028</a> of file <a class="el" href="mtnlm7__oclsm_8F90_source.html">mtnlm7_oclsm.F90</a>.</p>

<p class="reference">References <a class="el" href="orog__utils_8F90_source.html#l00714">orog_utils::get_index()</a>, <a class="el" href="orog__utils_8F90_source.html#l00128">orog_utils::get_lat_angle()</a>, <a class="el" href="orog__utils_8F90_source.html#l00152">orog_utils::get_lon_angle()</a>, <a class="el" href="orog__utils_8F90_source.html#l00816">orog_utils::get_xnsum()</a>, <a class="el" href="orog__utils_8F90_source.html#l00927">orog_utils::get_xnsum2()</a>, <a class="el" href="orog__utils_8F90_source.html#l01029">orog_utils::get_xnsum3()</a>, and <a class="el" href="orog__utils_8F90_source.html#l00318">orog_utils::inside_a_polygon()</a>.</p>

<p class="reference">Referenced by <a class="el" href="mtnlm7__oclsm_8F90_source.html#l00119">tersub()</a>.</p>

</div>
</div>
<a id="aa43d59fb095cc58fca01f2d537e27f27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa43d59fb095cc58fca01f2d537e27f27">&#9670;&nbsp;</a></span>makepc2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine makepc2 </td>
          <td>(</td>
          <td class="paramtype">integer, dimension(imn,jmn), intent(in)&#160;</td>
          <td class="paramname"><em>ZAVG</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(imn,jmn), intent(in)&#160;</td>
          <td class="paramname"><em>ZSLM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im,jm), intent(out)&#160;</td>
          <td class="paramname"><em>THETA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im,jm), intent(out)&#160;</td>
          <td class="paramname"><em>GAMMA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im,jm), intent(out)&#160;</td>
          <td class="paramname"><em>SIGMA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>IM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>JM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>IMN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>JMN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im+1,jm+1), intent(in)&#160;</td>
          <td class="paramname"><em>lon_c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im+1,jm+1), intent(in)&#160;</td>
          <td class="paramname"><em>lat_c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(im,jm), intent(in)&#160;</td>
          <td class="paramname"><em>SLM</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make the principle coordinates - slope of orography, anisotropy, angle of mountain range with respect to east. </p>
<p>This routine is used for the FV3GFS cubed-sphere grid.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">zavg</td><td>The high-resolution input orography dataset. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">zslm</td><td>The high-resolution input land-mask dataset. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">theta</td><td>Angle of mountain range with respect to east for each model point. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">gamma</td><td>Anisotropy for each model point. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">sigma</td><td>Slope of orography for each model point. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">im</td><td>"i" dimension of the model grid tile. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">jm</td><td>"j" dimension of the model grid tile. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">imn</td><td>"i" dimension of the hi-res input orog/mask datasets. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">jmn</td><td>"j" dimension of the hi-res input orog/mask datasets. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lon_c</td><td>Longitude of model grid corner points. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lat_c</td><td>Latitude of the model grid corner points. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">SLM</td><td>mask </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>GFDL Programmer </dd></dl>

<p class="definition">Definition at line <a class="el" href="mtnlm7__oclsm_8F90_source.html#l00772">772</a> of file <a class="el" href="mtnlm7__oclsm_8F90_source.html">mtnlm7_oclsm.F90</a>.</p>

<p class="reference">References <a class="el" href="orog__utils_8F90_source.html#l00714">orog_utils::get_index()</a>, and <a class="el" href="orog__utils_8F90_source.html#l00318">orog_utils::inside_a_polygon()</a>.</p>

<p class="reference">Referenced by <a class="el" href="mtnlm7__oclsm_8F90_source.html#l00119">tersub()</a>.</p>

</div>
</div>
<a id="ae8cc4cf6c036b4bdcf88fb0a80fad31f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8cc4cf6c036b4bdcf88fb0a80fad31f">&#9670;&nbsp;</a></span>tersub()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine tersub </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>IM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>JM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>EFAC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>OUTGRID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in)&#160;</td>
          <td class="paramname"><em>MASK_ONLY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>EXTERNAL_MASK_FILE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Driver routine to compute terrain. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">IM</td><td>"i" dimension of the model grid tile. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">JM</td><td>"j" dimension of the model grid tile. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">EFAC</td><td>Factor to adjust orography by its variance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">OUTGRID</td><td>The 'grid' file for the model tile. grid. When specified, will be interpolated to model tile. When not specified, program will create fields from raw high-resolution topography data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">MASK_ONLY</td><td>Flag to generate the Land Mask only </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">EXTERNAL_MASK_FILE</td><td>File containing an externally generated land mask/fraction. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Jordan Alpert NOAA/EMC </dd></dl>

<p class="definition">Definition at line <a class="el" href="mtnlm7__oclsm_8F90_source.html#l00119">119</a> of file <a class="el" href="mtnlm7__oclsm_8F90_source.html">mtnlm7_oclsm.F90</a>.</p>

<p class="reference">References <a class="el" href="mtnlm7__oclsm_8F90_source.html#l00409">make_mask()</a>, <a class="el" href="mtnlm7__oclsm_8F90_source.html#l00547">makemt2()</a>, <a class="el" href="mtnlm7__oclsm_8F90_source.html#l01028">makeoa2()</a>, <a class="el" href="mtnlm7__oclsm_8F90_source.html#l00772">makepc2()</a>, <a class="el" href="orog__utils_8F90_source.html#l00050">orog_utils::minmax()</a>, <a class="el" href="io__utils_8F90_source.html#l00628">io_utils::qc_orog_by_ramp()</a>, <a class="el" href="io__utils_8F90_source.html#l00590">io_utils::read_global_mask()</a>, <a class="el" href="io__utils_8F90_source.html#l00551">io_utils::read_global_orog()</a>, <a class="el" href="io__utils_8F90_source.html#l00354">io_utils::read_mask()</a>, <a class="el" href="io__utils_8F90_source.html#l00453">io_utils::read_mdl_grid_file()</a>, <a class="el" href="orog__utils_8F90_source.html#l00561">orog_utils::remove_isolated_pts()</a>, <a class="el" href="orog__utils_8F90_source.html#l01087">orog_utils::timef()</a>, <a class="el" href="io__utils_8F90_source.html#l00265">io_utils::write_mask_netcdf()</a>, and <a class="el" href="io__utils_8F90_source.html#l00042">io_utils::write_netcdf()</a>.</p>

<p class="reference">Referenced by <a class="el" href="mtnlm7__oclsm_8F90_source.html#l00072">__mtnlm7_oclsm.f90__()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d8b772108138bf796aaa3f7fe4e09294.html">sorc</a></li><li class="navelem"><a class="el" href="dir_3785541a64e6aa2cb536d16f6c34a196.html">orog_mask_tools.fd</a></li><li class="navelem"><a class="el" href="dir_d061f9da02c149ef8007f44f98b1f0b6.html">orog.fd</a></li><li class="navelem"><a class="el" href="mtnlm7__oclsm_8F90.html">mtnlm7_oclsm.F90</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
