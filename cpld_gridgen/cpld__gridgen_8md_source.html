<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>cpld_gridgen: /scratch1/NCEPDEV/da/George.Gayno/ufs_utils.git/UFS_UTILS.upstream/sorc/cpld_gridgen.fd/docs/cpld_gridgen.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">cpld_gridgen
   &#160;<span id="projectnumber">1.12.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Types&#160;List</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('cpld__gridgen_8md.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">/scratch1/NCEPDEV/da/George.Gayno/ufs_utils.git/UFS_UTILS.upstream/sorc/cpld_gridgen.fd/docs/cpld_gridgen.md</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor"># cpldgrid_gen</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor"># Introduction</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;The cpld_gengrid program and associated script related functions create the files required <span class="keywordflow">for</span> Fix and IC files <span class="keywordflow">for</span> the coupled model.</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;This document is part of the &lt;a href=<span class="stringliteral">&quot;../index.html&quot;</span>&gt;UFS_UTILS</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;documentation&lt;/a&gt;.</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;The cpld_gengrid program is part of the</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;[UFS_UTILS](https:<span class="comment">//github.com/ufs-community/UFS_UTILS) project.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">## Creating Fix and IC files required for the Coupled Model</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;For the UFS coupled model application S2S or S2SW, the following fix files are required:</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;- The CICE6 grid and mask file</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;- The mesh file <span class="keywordflow">for</span> the desired OCN/ICE resolution, which is identical <span class="keywordflow">for</span> MOM6 and CICE6.</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;- The mapped ocean mask on the FV3 tiles</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;- The ESMF regridding weights required to create the CICE6 IC from CPC (SIS2) reanalysis.</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;- The ESMF regridding weights required to remap the CICE6 or MOM6 output from tripole grid to a rectilinear grid (optional).</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;Since MOM6 creates the model grid at runtime (including adjusting the land mask, if required), the required files for CICE and UFSAtm must be created in a pre-processing step using only the MOM6 supergrid, topography and land mask files as input. This allows the mapped ocean mask (used for creating of the ATM ICs) and the CICE6 grid and mask files to be consistent with the run-time configuration of MOM6.</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">## Background:</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">### MOM6 grids</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;The MOM6 supergrid contains a MOM6 grid at twice the desired resolution. The indexing of the supergrid vs the reduced grid is: </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            Super Grid               Reduced Grid</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        I-1,J+1     I+1,J+1</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;           X─────X─────X            I-1,J   i,j</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;           │     │     │               X─────X</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;           │     │     │               │     │</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;           │    i│j    │               │  T  │</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;           X─────X─────X               │     │</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;           │     │     │               X─────X</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;           │     │     │          I-1,J-1    I,J-1</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;           │     │     │</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;           X─────X─────X</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        I-1,J-1     I+1,J-1</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;MOM6 uses an Arakawa C grid. Within cpld_gridgen, these are referred to as <span class="stringliteral">&quot;stagger&quot;</span> locations, and named as follows:</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                 Bu────Cv─────Bu</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                 │            │</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                 │            │</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                 Cu    Ct     Cu</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                 │            │</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                 │            │</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                 Bu────Cv─────Bu</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">### Rotation angles</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;For the tripole grid, a rotation angle is defined to translate vectors to/from the grid (i-j) orientation from/to true E-W. The rotation angle is calculated at run-time in MOM6 (src/initialization/MOM_shared_initialization.F90). However, CICE6 requires a rotation at the corner (``Bu``) grid points, which for points along the tripole seam requires values on the other side of the tripole fold. In cpld_gridgen, these values are found by &quot;flipping over&quot; the values on the last row of the MOM6 super-grid. If ``ipL`` and ``ipR`` are the i-indices of the poles along the last j-row:</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                ipL-1     ipL    ipL+1            ipR-1     ipR    ipR+1</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                   x-------x-------x     |||        x-------x-------x</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;then after folding along the tripole seam, ``ipL`` and ``ipR`` must align:</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                               ipR+1     ipR    ipR-1</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                                  x-------x-------x</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                               ipL-1     ipL    ipL+1</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                                  x-------x-------x</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;Using the folded seam, the values required for calculating the rotation angle on the ``Bu`` grid points are available and can be calculated in the same way as MOM6 calculates rotation <a class="code" href="classangles.html">angles</a> for the ``Ct`` grid points. </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">### SCRIP format files</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;For calculating interpolation weights <span class="keyword">using</span> ESMF, a SCRIP file needs to be provided. A SCIP file contains the both the grid locations of any stagger grid location (e.g. ``Ct``) and the associated grid <a class="code" href="classvertices.html">vertices</a> for that point. As seen from the above diagram, for the ``Ct`` points, those grid <a class="code" href="classvertices.html">vertices</a> are given by the ``Bu`` grid locations. </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;SCRIP requires that the <a class="code" href="classvertices.html">vertices</a> be ordered counter-clockwise so that the center grid point is always to the left of the vertex. In cpld_gridgen, <a class="code" href="classvertices.html">vertices</a> are defined counter-clockwise from upper right. ``Ct`` <a class="code" href="classvertices.html">vertices</a> are located on the ``Bu`` grid (as shown above), ``Cu`` <a class="code" href="classvertices.html">vertices</a> on the ``Cv`` grid, ``Cv`` <a class="code" href="classvertices.html">vertices</a> on the ``Cu`` grid and ``Bu`` <a class="code" href="classvertices.html">vertices</a> on the ``Ct`` grid. For example, for the ``Ct`` grid, the <a class="code" href="classvertices.html">vertices</a> are:</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;             Vertex <span class="preprocessor">#2             Vertex #1</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor"></span>             Bu(i-1,j)             Bu(i,j)</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                         Ct(i,j)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;           Bu(i-1,j-1)             Bu(i,j-1)</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;             Vertex <span class="preprocessor">#3             Vertex #4</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;so that the <a class="code" href="classvertices.html">vertices</a> <span class="keywordflow">for</span> the ``Ct`` grid are found as off-sets of the i,j index of the ``Bu`` grid</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;     iVertCt(4) = (/0, -1, -1,  0/)</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;     jVertCt(4) = (/0,  0, -1, -1/)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;     </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;Careful examination of the remaining stagger locations lead to similar definitions <span class="keywordflow">for</span> the i,j offsets required to extract the <a class="code" href="classvertices.html">vertices</a>, all of which can be defined in terms of the ``iVertCt`` and ``jVertCt`` values.</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;Special treatment is require at the bottom of the grid, where the vertices of the ``Ct`` and ``Cu`` grid must be set manually (note, these points are on land.) The top of the grid also requires special treatment because the required vertices are located across the tripole seam. This is accomplished by creating 1-d arrays which hold the ``Ct`` and ``Cu`` grid point locations across the matched seam.</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;## Generating the grid files</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;The cpld_gridgen program and associated script related functions perform the following tasks:</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;1. read the MOM6 supergrid and ocean mask file and optionally creates the required *topo_edits* file <span class="keywordflow">if</span> the land mask <span class="keywordflow">for</span> MOM6 is to be changed at runtime.</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;2. create a master grid file containing all stagger locations of the grid fully defined</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;3. create the CICE6 grid variables and writes the required CICE6 grid file</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;4. create a SCRIP file <span class="keywordflow">for</span> the center stagger (``Ct``) grid points and a second SCRIP file also containing the land mask</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;5. create the ESMF conservative regridding weights to map the ocean mask to the FV3 tiles and write the mapped mask to 6 tile files</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;6. create the ESMF regridding weights to map the 1/4 CICE6 restart file to a lower resolution tripole grid </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;7. optionally call a routine to generate ESMF regridding weights to map the tripole grid to a set of rectilinear grids</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;8. use the command line command *ESMF_Scrip2Unstruct* to generate the ocean mesh from the SCRIP file containing the land mask (item 4)</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;9. use an NCO command line command to generate the CICE6 land mask file from the CICE6 grid file</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor">## The generated files</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;The exact list of files produced by the *cpld_gridgen.sh* script will vary depending on several factors. For example, <span class="keywordflow">if</span> the *DO_POSTWGHTS* flag is <span class="keyword">true</span>, then a SCRIP format file will be produced <span class="keywordflow">for each</span> rectilinear destination grid desired and a file containing the regridding weights to map from the center ``Ct`` stagger point to the rectilinear grid will also be written. Because both MOM6 and CICE6 velocity variables are located at ``Cu``,``Cv`` or ``Bu`` locations, additional files will also be created to regrid from the velocity stagger locations to the center ``Ct`` location. If an OCN/ICE grid resolution less than 1/4 degree is chosen, then a file containing regridding weights from the 1/4 degree grid to a lower resolution grid will also be written. Note also that multiple intermediate SCRIP format files may be produced depending on the options chosen.</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;&lt;br&gt;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;* Executing the script <span class="keywordflow">for</span> the 1/4 deg OCN/ICE resolution will result in the following files being produced in the output location:</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;&lt;table&gt;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;&lt;caption <span class="keywordtype">id</span>=<span class="stringliteral">&quot;foutmx025&quot;</span>&gt;Output files <span class="keywordflow">for</span> 1/4 deg&lt;/caption&gt;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;&lt;tr&gt;&lt;th&gt;File name                      &lt;th&gt;Description                              &lt;th&gt;Function</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;&lt;tr&gt;&lt;td row=1&gt;tripole.mx025.nc         &lt;td&gt;master grid file                         &lt;td&gt;Creating all subsequent grid or mapping files</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;&lt;tr&gt;&lt;td row=2&gt;grid_cice_NEMS_mx025.nc  &lt;td&gt;the CICE grid file                       &lt;td&gt;used at runtime by CICE6</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;&lt;tr&gt;&lt;td row=3&gt;kmtu_cice_NEMS_mx025.nc  &lt;td&gt;the CICE mask file                       &lt;td&gt;used at runtime by CICE6</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;&lt;tr&gt;&lt;td row=4&gt;mesh.mx025.nc            &lt;td&gt;the ocean and ice mesh file              &lt;td&gt;used at runtime by CICE6, MOM6, and CMEPS</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;&lt;tr&gt;&lt;td row=5&gt;C384.mx025.tile[1-6].nc  &lt;td&gt;the mapped ocean mask on the ATM tiles   &lt;td&gt;used to create ATM ICs consistent with the &lt;br&gt;                                                                                           fractional grid</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;&lt;/table&gt;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;&lt;br&gt;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;   </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;* If the optional post-weights are generated, the following files will be produced in the output location: </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;&lt;table&gt;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;&lt;caption <span class="keywordtype">id</span>=<span class="stringliteral">&quot;foutpost&quot;</span>&gt;Optional post-weights files <span class="keywordflow">for</span> 1/4deg&lt;/caption&gt;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;&lt;tr&gt;&lt;th&gt;File name                                                                       &lt;th&gt;Function</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;&lt;tr&gt;&lt;td row=1&gt;tripole.mx025.[Cu][Cv][Bu].to.Ct.bilinear.nc                              &lt;td&gt;the ESMF weights <span class="keywordflow">for</span> mapping OCN or ICE &lt;br&gt;                                                                                              output fields from the various stagger &lt;br&gt;                                                                                               locations on the tripole grid to the &lt;br&gt;                                                                                                 center (Ct) stagger location on the &lt;br&gt;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                                                                                            same tripole grid using bilinear mapping</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;&lt;tr&gt;&lt;td row=2&gt;tripole.mx025.Ct.to.rect.[destination resolution].[bilinear][conserve].nc &lt;td&gt;the ESMF weights for mapping variables &lt;br&gt;                                                                                               on the center (Ct) stagger location on &lt;br&gt;                                                                                               the tripole grid to a rectilinear grid &lt;br&gt;                                                                                               with [destination resolution] using &lt;br&gt;                                                                                                  either bilinear or conservative mapping</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;&lt;/table&gt;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;&lt;br&gt;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;* If a resolution other than 1/4 degree is used in *cpld_gridgen.sh*, the following file will be produced in the output location: </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;&lt;table&gt;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;&lt;caption <span class="keywordtype">id</span>=&quot;foutcice6&quot;&gt;Output files for CICE6 IC creation at tripole destination resolution&lt;/caption&gt;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;&lt;tr&gt;&lt;th&gt;File name                                                               &lt;th&gt;Function</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;&lt;tr&gt;&lt;td row=1&gt;tripole.mx025.Ct.to.mx[destination resolution].Ct.neareststod.nc  &lt;td&gt;the ESMF weights for mapping the 1/4 CICE ICs to &lt;br&gt;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                                                                                    a tripole [destination resolution] using nearest &lt;br&gt;                                                                                     source-to-destination mapping</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;&lt;/table&gt;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;&lt;br&gt;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;* If run-time land mask changes for MOM6 are requested, the following file will be produced in the output location:</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;&lt;table&gt;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;&lt;caption <span class="keywordtype">id</span>=&quot;fouttopo&quot;&gt;Output files for run-time modification of MOM6 land mask&lt;/caption&gt;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;&lt;tr&gt;&lt;th&gt;File name                       &lt;th&gt;Function</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;&lt;tr&gt;&lt;td row=1&gt;ufs.[Default filename].nc &lt;td&gt;Topo-edits required for UFS application. These are appended to the existing default topo &lt;br&gt;                                             edits file and implemented at run time with the parameter flag &lt;br&gt;                                                                       ``ALLOW_LANDMASK_CHANGES=true``. All files produced by the *cpld_gridgen.sh* will be &lt;br&gt;                                                 consistent with this run-time land mask.</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;&lt;/table&gt;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="ttc" id="classvertices_html"><div class="ttname"><a href="classvertices.html">vertices</a></div><div class="ttdef"><b>Definition:</b> <a href="vertices_8F90_source.html#l00013">vertices.F90:13</a></div></div>
<div class="ttc" id="classangles_html"><div class="ttname"><a href="classangles.html">angles</a></div><div class="ttdef"><b>Definition:</b> <a href="angles_8F90_source.html#l00010">angles.F90:10</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>cpld_gridgen.md</b></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
